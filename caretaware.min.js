/**
 * Copyright (c) 2015, Leo Di Donato <leodidonato@gmail.com>
 * caretaware.min.js - AngularJS directive for caret aware elements
 * @version 0.2.0
 * @link http://github.com/leodido/ng-caret-aware
 * @license MIT
 */
(function(){function l(b,h,m){function f(a){var c=('undefined'!==typeof d.value?d.value:h.text()).replace(p,'').length,b=~~a;0>b?b=c+a+1:b>c&&(b=c);return b}var d=h[0],k,e='setSelectionRange'in d||'selectionStart'in d,g='createTextRange'in d||'selection'in document,p=/\r/g,c=this;switch(!0){case e:e=function(){return d.selectionStart};g=function(a){a=f(a);d.focus();d.setSelectionRange(a,a);b[c.getNamespace()]=a;return c};break;case g:e=function(){d.focus();var a=document.selection.createRange(),b=document.selection.createRange().text.length;
a.moveStart('character',-d.value.length);return a.text.length-b};g=function(a){a=f(a);var e=d.createTextRange();e.move('character',a);e.select();b[c.getNamespace()]=a;return c};break;default:e=function(){return 0},g=function(){return c}}c.getNamespace=function(){return k};c.setPosition=g;c.getPosition=e;b.$watch(function(){return b[c.getNamespace()]},function(a){c.getPosition()!==a&&c.setPosition(a)});k=m.caretAware||'caret';b[k]=0}l.$inject=['$scope','$element','$attrs'];function n(){}n.prototype.link=function(b,h,m,f){h.on('keydown keyup click',function(){b.$evalAsync(function(){b[f.getNamespace()]=f.getPosition()})})};angular.module('leodido.caretAware',[]).directive('caretAware',function(){var b=new n;return{restrict:'A',require:'caretAware',controller:l,link:b.link}});})();
