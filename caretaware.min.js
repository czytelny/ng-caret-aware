/**
 * Copyright (c) 2015, Leo Di Donato <leodidonato@gmail.com>
 * caretaware.min.js - AngularJS directive for caret aware elements
 * @version 0.2.0
 * @link http://github.com/leodido/ng-caret-aware
 * @license MIT
 */
(function(){function h(){}
h.prototype.controller=function(c,k,m){function f(a){var c=('undefined'!==typeof d.value?d.value:k.text()).replace(n,'').length,b=~~a;0>b?b=c+a+1:b>c&&(b=c);return b}var d=k[0],l,e='setSelectionRange'in d||'selectionStart'in d,g='createTextRange'in d||'selection'in document,n=/\r/g,b=this;switch(!0){case e:e=function(){return d.selectionStart};g=function(a){a=f(a);d.focus();d.setSelectionRange(a,a);c[b.getNamespace()]=a;return b};break;case g:e=function(){d.focus();var a=document.selection.createRange(),b=
document.selection.createRange().text.length;a.moveStart('character',-d.value.length);return a.text.length-b};g=function(a){a=f(a);var e=d.createTextRange();e.move('character',a);e.select();c[b.getNamespace()]=a;return b};break;default:e=function(){return 0},g=function(){return b}}b.getNamespace=function(){return l};b.setPosition=g;b.getPosition=e;c.$watch(function(){return c[b.getNamespace()]},function(a){b.getPosition()!==a&&b.setPosition(a)});l=m.caretAware||'caret';c[l]=0};
h.prototype.controller.$inject=['$scope','$element','$attrs'];h.prototype.link=function(c,k,m,f){k.on('keydown keyup click',function(){c.$evalAsync(function(){c[f.getNamespace()]=f.getPosition()})})};angular.module('leodido.caretAware',[]).directive('caretAware',function(){var c=new h;return{restrict:'A',require:'caretAware',controller:c.controller,link:c.link}});})();
