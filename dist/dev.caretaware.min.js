/**
 * Copyright (c) 2015, Leo Di Donato <leodidonato@gmail.com>
 * caretaware.min.js - AngularJS directive for caret aware elements
 * @version 0.3.0
 * @link http://github.com/leodido/ng-caret-aware
 * @license MIT
 */
(function(){function n(d,h,p,g){function q(a){var b=(c.value||'').replace(/\r/g,'').length,e=~~a;0>e?e=b+a:e>b&&(e=b);return e}console.log('CaretController::ctor');var c=h[0],m;h='setSelectionRange'in c||'selectionStart'in c;var t='createTextRange'in c||'selection'in document,f=this,k,l;switch(!0){case h:k=function(){var a=c.selectionStart,b=c.selectionEnd,e=b-a;return{start:a,end:b,length:e,text:c.value.substr(a,e)}};l=function(a){a=q(a);g(function(){c.focus()},0,!1);c.setSelectionRange(a,a);c.selectionStart=
a;c.selectionEnd=a;d[f.a()]=a};break;case t:k=function(){c.focus();var a=document.selection.createRange();if(null===a)return{start:0,end:c.value.length,length:0};var b=c.createTextRange(),e=b.duplicate();b.moveToBookmark(a.getBookmark());e.setEndPoint('EndToStart',b);b=e.text.length;a=a.text;e=a.length;return{start:b,end:b+e,length:e,text:a}};l=function(a){a=q(a);var b=c.createTextRange();b.move('character',a);b.select();d[f.a()]=a};break;default:k=function(){return{start:0,end:0,length:0,text:''}},
l=function(){}}m=p.caretAware||'caret';d[m]=0;f.a=function(){return m};f.c=function(a){if(!isNaN(parseFloat(a))&&isFinite(a))return l(a),f;throw new TypeError('Position MUST be numeric.');};f.b=function(){return k().start};f.getSelection=k;f.getNamespace=f.a;f.setPosition=f.c;f.getPosition=f.b}n.$inject=['$scope','$element','$attrs','$timeout'];function r(){console.log('CaretAware::ctor')}r.prototype.link=function(d,h,p,g){console.log('CaretAware::link');h.on('keydown keyup click',function(){d.$evalAsync(function(){d[g.a()]=g.b()})});d.$watch(g.a(),function(d){g.b()!==d&&g.c(d)});d.$on('$destroy',function(){delete d[g.a()];h.off('keydown keyup click')})};angular.module('leodido.caretAware',[]).directive('caretAware',function(){var d=new r;return{restrict:'AC',require:'caretAware',controller:n,link:d.link}});})();
//# sourceMappingURL=dev.caretaware.min.js.map
